"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[835],{69128:(e,t,n)=>{n.r(t),n.d(t,{CollectionConcerts:()=>H,default:()=>X});var a=n(63038),c=n.n(a),o=(n(68309),n(85827),n(41539),n(83710),n(21249),n(47941),n(92222),n(67294)),r=n.n(o),l=n(65858),i=n(73012),s=n(87577),u=n(44503),m=n(21770),g=n(28760),d=n(20657),h=n(94880),v=n(25340);const f={ConcertCard:"w7WYE0pNrXsGp81TWlep",date:"cQnwpYrFXJArqcrxXz_x",dateMonth:"bxpRmGk8trHPqvGMVIZm",metadata:"f7Urb3el7Cdc1hldMZwx",title:"bw6upmUBVU8ORFEVgDba",locationData:"Z7HIlPF3XWV5FFzNE69K",icon:"CGyIKgeuR91lPqj8YVeT",location:"otqz47ckj4i0LbLfp8qZ",fullDate:"Rs2XVrhCam4zYYgAMEnt",image:"Kb9n53SOlfD2TIcCAYON"};var p=r().memo((function(e){var t=e.entity,n=e.onClick,a=e.openingDate,c=e.closingDate,o=e.concertsCount,l=t.artists[0],i=(0,v.ij)(t);return r().createElement(m.oM,{onClick:n,className:f.ConcertCard,component:"div"},l.imageUri?r().createElement(h.Z,null,r().createElement("div",{"data-testid":"image-container",className:f.image,style:{backgroundImage:"linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(".concat(l.imageUri,")")}})):null,r().createElement("time",{className:f.date,dateTime:t.date.isoString},r().createElement(g.Dy,{as:"h5",variant:"minuetBold",className:f.dateMonth},a.getMonth()===c.getMonth()?"".concat((0,v.lJ)(a)," ").concat(a.getDate(),"-").concat(c.getDate()):"".concat((0,v.lJ)(a)," ").concat(a.getDate()," - ").concat((0,v.lJ)(c)," ").concat(c.getDate()))),r().createElement("div",{className:f.metadata,dir:"auto"},r().createElement(g.Dy,{as:"h2",variant:"cello",weight:"bold",className:f.title},i),r().createElement("div",{className:f.locationData},r().createElement(g.Dy,{as:"h2",className:f.concertsCount,variant:"mesto","data-testid":"concerts-count"},"".concat(d.ag.get("concerts.count",o))))))})),E=n(91288),y=n(79202),N=n(82716),b=n(85105),_=n(67892);const C={concertsModal:"YOxOpXFNWI7YGtEZZbCZ",concertsContainer:"HMOJhNJ2iuzLFK7rUffx",closeIconContainer:"CJm07cB3YvHYlW1CUa14",artistContainer:"BeDVoBDoAMbBo6FCGx_K",artistImage:"AjfnzaKciUpnDzXZUe1A",artistInfoContainer:"U6bT8N7tUVd1vN3R5yc2",artistName:"sIZcowFDxfxZpxGhFyyv",row:"blrpUerZnuHaKtKpIV7R",date:"F2LhEOfLN7Www0Fi9n4n",dateMonth:"mxNFEvD37s6pp3mLn6vG",dateDay:"zi8cY_QK19JcYL7jKnyF",eventInfo:"T4ba46YULO9kf84gSJie",concertTitle:"YC3_s7yeZJajRFdcJT6e",concertDate:"Mat4zezm_cy7Evn_BLJ5",concertVenue:"wRawj1pMmarKdp69PwnN"};var D=function(e){var t=e.concert,n=t.date.isoString,a=new Date(Date.parse(n)),c="ONLINE"===t.category,o=t.venue.name,l=t.venue.location.name,i=c?o:"".concat(o,", ").concat(l);return r().createElement(_.r,{key:t.id,to:"/concert/".concat(t.id),className:C.row},r().createElement("time",{className:C.date,dateTime:n},r().createElement(g.Dy,{as:"h5",variant:"minuetBold",className:C.dateMonth},(0,v.lJ)(a)),r().createElement(g.Dy,{as:"h1",variant:"cello",className:C.dateDay},a.getDate())),r().createElement("div",{className:C.eventInfo},r().createElement(g.Dy,{as:"div",variant:"violaBold",className:C.concertTitle,"data-testid":"event-title"},(0,v.Yl)(t)),r().createElement(g.Dy,{as:"div",variant:"viola",className:C.concertDate},"".concat((0,v.cd)(a)," • ").concat((0,v.b8)(a))),r().createElement(g.Dy,{as:"div",variant:"viola",className:C.concertVenue,"data-testid":"event-venue"},i)))},L=r().memo((function(e){var t=e.concerts,n=e.onClose,a=e.open,c=e.location;if(0===t.length)return null;var o=t[0].artists[0];return r().createElement(b.Z,{contentLabel:d.ag.get("concerts.label"),isOpen:a,className:C.concertsModal,onRequestClose:n},r().createElement("section",{className:C.concertsContainer},r().createElement("div",{className:C.closeIconContainer},r().createElement(k,{iconOnly:y.j,buttonSize:"sm",onClick:n})),r().createElement("div",{className:C.artistContainer},r().createElement(N.Ee,{height:"48",width:"48",className:C.artistImage,src:o.imageUri}),r().createElement("div",{className:C.artistInfoContainer},r().createElement(g.Dy,{as:"h3",variant:"cello",className:C.artistName,"data-testid":"event-venue"},o.name),r().createElement(g.Dy,{as:"h3",variant:"mesto",className:C.concertsCount,"data-testid":"event-venue"},"".concat(d.ag.get("concerts.count_near_location",t.length,c))))),t.map((function(e){return r().createElement(D,{key:e.uri,concert:e})}))))})),k=(0,E.ZP)(m.oM).withConfig({displayName:"GroupedConcerts___StyledButtonTertiary",componentId:"sc-9lng9f-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"}),w=n(70369),I=n(29255),S=n(51574),F=n(42922),x=n(31595),U=n(6581),J=n(7679),M=n(18245),O=n(19565),V=n(42273),Z=n(59482),z=n(72907),G=n(1663),B=n(19480);const R="FqqGmylJTvbVkjiIX2eL",K="BUGk_fxRbfJzRml1EewP",T="F9Va5nmgay71lz4V2GLN";var P={Online:d.ag.get("concerts_upcoming_virtual_events"),Recommended:d.ag.get("concerts_recommended_for_you"),Popular:d.ag.get("concerts_popular_near_you"),Playlists:d.ag.get("playlists")},j=i.jN0,Y=function(e){var t=e.collection,n=e.concertMetadata,a=e.handleLocationChange,c=e.shouldCombineRecs,o=e.setShowGroupedConcerts,l=e.setGroupedConcerts,i=(null==t?void 0:t.items)||[],s=null==t?void 0:t.isFetching,u=n.userLocation.name||d.ag.get("concerts.default_location"),m=function(e){if(!e.concerts||!e.concerts.length)return null;var t=e.concerts[0];return e.concerts.length>1?r().createElement(p,{key:t.uri,entity:t,openingDate:new Date(e.openingDate),closingDate:new Date(e.closingDate),concertsCount:e.concerts.length,onClick:function(){l(e.concerts),o(!0)}}):r().createElement(J.k,{key:t.uri,entity:t,isVirtual:c?"ONLINE"===t.category:"online"===e.source,shouldCombineRecs:c})};if(s)return r().createElement(G.h,{hasError:!1,errorMessage:d.ag.get("error.request-browse-concerts-failure")});return r().createElement("div",{className:T},r().createElement("div",{className:R,"data-testid":"location-selector"},r().createElement(M.Z,{handleLocationChange:a,locationStr:u})),function(){if(!i.length)return r().createElement(O.u,{title:d.ag.get("concerts.error.no_concerts_found_title"),message:d.ag.get("concerts.error.no_concerts_found_message",u),renderInline:!0});var e=i.reduce((function(e,t){return"recommendation"===t.source?e.Recommended.push(t):"popular"===t.source?e.Popular.push(t):"online"===t.source&&e.Online.push(t),e}),{Online:[],Recommended:[],Popular:[]});return Object.keys(e).map((function(t,n){var a=e[t];return 0===a.length?null:r().createElement("div",{key:t,className:R},r().createElement(F.ZP,{value:"headered-grid",index:n},r().createElement(B.P,{total:a.length,title:P[t],showAll:!0},a.map(m))))}))}())},q=r().memo((function(){var e=(0,l.I0)(),t=(0,s.W6)(u.AW),n=(0,l.v9)(I.Gg).isAnonymous,a=(0,l.v9)((function(e){return e.concerts.collection})),i=(0,l.v9)((function(e){return e.concerts})),m=i.userLocation.name||d.ag.get("concerts.default_location"),g=i.userLocation.geonameId;(0,o.useEffect)((function(){e((0,U.AJ)(null!=g?g:null,n))}),[e,n,g]);var h=(0,x.Y)(j),v=(0,o.useState)(!1),f=c()(v,2),p=f[0],E=f[1],y=(0,o.useState)([]),N=c()(y,2),b=N[0],_=N[1];return r().createElement("section",{className:K},r().createElement(w.$,null,"".concat(d.ag.get("concerts_shows_in")," ").concat(m)),r().createElement(V.gF,{size:V.fR.SMALL,backgroundColor:j},r().createElement(V.sP,null,r().createElement(V.xd,null,d.ag.get("concerts.label"))),r().createElement(Z.W,null,r().createElement(z.i,{text:d.ag.get("concerts.label")}))),r().createElement(S.I,{backgroundColor:h}),r().createElement(Y,{collection:a,concertMetadata:i,handleLocationChange:function(t){t&&t.geonameId&&(e((0,U.kz)(t)),e((0,U.AJ)(t.geonameId,n)))},shouldCombineRecs:t,setShowGroupedConcerts:E,setGroupedConcerts:_}),r().createElement(L,{location:m,concerts:b,onClose:function(){return E(!1)},open:p}))})),H=function(e){return r().createElement(o.Suspense,{fallback:null},r().createElement(q,e))};const X=H},7679:(e,t,n)=>{n.d(t,{k:()=>_});n(68309),n(83710),n(92222);var a=n(67294),c=n.n(a),o=n(97493),r=n(64656),l=n(28760),i=n(94880),s=n(43315),u=n(25340),m=n(67892);const g="lKqKagNqQ8VlvdFmruT3",d="Z2uK7sMMyCWb6pniuNXi",h="NIMwRV_NRJ13Vqumxn_j",v="_32BBOf0wCFJBS35JKFU0",f="vdvOAp_f8lhHOp7y1BqJ",p="qHSZnGIgaXfml2KOzmbd",E="zX69m46sU0G_VEwc4Fiy",y="lKkeD_aRHPt1Sb7cc031",N="hBa5HsnSqAQj7ngrUaoq",b="WD2YMKFx0lQZSbihWLOR";var _=c().memo((function(e){var t=e.entity,n=e.isVirtual,a=e.shouldCombineRecs,_=t.venue,C=_.name,D=_.location.name,L=t.artists[0],k=(0,u.ij)(t),w=new Date(t.date.isoString),I=n?o.q:r.K;return c().createElement(m.r,{to:"/concert/".concat(t.id),className:g},L.imageUri?c().createElement(i.Z,null,c().createElement("div",{"data-testid":"image-container",className:b,style:{backgroundImage:"linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(".concat(L.imageUri,")")}})):null,c().createElement("time",{className:d,dateTime:t.date.isoString},c().createElement(l.Dy,{as:"h5",variant:"minuetBold",className:h},"".concat((0,u.lJ)(w)," ").concat(w.getDate()))),c().createElement("div",{className:v,dir:"auto"},c().createElement(l.Dy,{as:"h2",className:N,variant:"minuetBold"},(0,s.FO)(w)," • ",(0,u.b8)(w)),c().createElement(l.Dy,{as:"h2",variant:"cello",weight:"bold",className:f},k),c().createElement("div",{className:p},a?c().createElement(I,{className:E,"aria-label":n?"Virtual Event":"In-Person Event",iconSize:16}):null,c().createElement(l.Dy,{as:"h2",className:y,variant:"mesto","data-testid":"location-name"},n?C:"".concat(C,", ").concat(D)))))}))},18245:(e,t,n)=>{n.d(t,{Z:()=>k});var a=n(63038),c=n.n(a),o=n(59713),r=n.n(o),l=(n(82772),n(21249),n(67294)),i=n.n(l),s=n(94184),u=n.n(s),m=n(40160),g=n(86912),d=n(28760),h=n(8455),v=n(20657),f=n(98742),p=n(80624),E=n(19719),y=n(29854);const N={locationContainer:"bH2kPQ5zw1hLCwpWXGGy",locationName:"CZHxaQ5LgtirQvf9Unjx",clearSuggestions:"nPmfHJAB2cFMM9BekCcp",hide:"WmgD8cdy4nG4XBNIO7wJ",changeLocation:"dmmS1BV6JiIcwmD5oTzk",changeLocationDropdown:"n3vaiTuGhBV97WsJ6Zmk",changeLocationInputLabel:"C6NHL3DpQg1P_Kn17nRQ",changeLocationInput:"GLw2a0iCnksbb95n9Uxb",searchInputSearchIcon:"bZEIsokqSuv6PC6x9yPI",changeLocationLabel:"xvdlJPLpxB3UU8F2BDUl",icon:"ZjO209jguit9txCu59ou",changeLocationList:"nfDD3WtVxTUJoHe_XqKs",changeLocationError:"V8EzYUuVJXyfFjyw9Gyz",changeLocationLink:"yJ0x9sVyyDY_aN8Zgu4i",changeLocationItem:"o5i4vbKhh1lViFIVgOc9",button:"qDHCmOVcAjUHggyCn8D4",locationLink:"tc9UlCgbKbc9J2Jtj63x"};var b,_="location_no_results",C="location_fetch_error",D=(b={},r()(b,_,v.ag.get("concert.error.no_locations_found_subtitle")),r()(b,C,v.ag.get("concert.error.general_error_title")),b),L=function(e){var t=i().createRef(),n=i().createRef(),a=(0,l.useState)(""),o=c()(a,2),r=o[0],s=o[1],b=(0,l.useState)(-1),L=c()(b,2),k=L[0],w=L[1],I=(0,l.useState)([]),S=c()(I,2),F=S[0],x=S[1],U=(0,l.useState)(null),J=c()(U,2),M=J[0],O=J[1],V=e.placeholder,Z=e.onSelectLocation,z=e.hideLocationSelector,G=(0,y.D)((function(){E.LH.fetchLocationQuery(p.b.getInstance(),r).then((function(e){var t=e.body,n=(t=void 0===t?{}:t).results,a=void 0===n?[]:n;x(a),a.length?O(null):O(_)}),(function(){x([]),O(C)}))}))(250),B=function(e){s(e),w(-1),x([]),O(null),e&&e.length>1&&G(e)},R=u()(N.clearSuggestions,N.hide);return(F&&F.length||M===_)&&(R=N.clearSuggestions),i().createElement("div",{className:N.changeLocation,"data-interaction-context":"location-selector"},i().createElement("div",{className:N.changeLocationDropdown,onKeyDown:function(e){var a=38,c=40,o=27,r=9,l=e.which,i=k;switch([o,c,a,r].indexOf(l)>-1&&e.preventDefault(),l){default:return;case o:return void Z(null);case a:i=Math.max(k-1,-1);break;case c:case r:i=Math.min(k+1,F.length-1);break;case 13:Z(F[k])}if(i<0)t.current.focus();else{var s=n.current.childNodes[i];s&&s.focus()}w(i)},role:"searchbox",onBlur:function(e){e.relatedTarget||(B(""),z())}},i().createElement("div",{className:N.changeLocationForm},i().createElement("div",{className:N.changeLocationLabel},i().createElement(g.z,{className:N.icon,iconSize:16}),i().createElement("input",{className:N.changeLocationInput,type:"search",id:"change-location-input",placeholder:V,value:r,onChange:function(e){return B(e.target.value)},ref:t,"aria-label":V,autoFocus:!0}),i().createElement("button",{className:R,"aria-label":v.ag.get("search.a11y.clear-input"),onClick:function(){return B("")}},i().createElement(f.T,{size:16})))),i().createElement("ol",{className:N.changeLocationList,ref:n},M&&i().createElement(d.Dy,{as:"li",variant:"ballad",className:N.changeLocationError},i().createElement(h.Z,{iconSize:16}),D[M]),F&&F.length&&F.map((function(e,t){return i().createElement(d.Dy,{as:"li",variant:"ballad",weight:"book",key:t,className:N.changeLocationItem,tabIndex:t+1},i().createElement(m.rU,{to:"#",className:N.changeLocationLink,onClick:function(){return Z(e)},role:"button"},e.location))}))||null)))};const k=function(e){var t=e.handleLocationChange,n=e.locationStr,a=(0,l.useState)(!1),o=c()(a,2),r=o[0],s=o[1];return i().createElement("div",{className:N.locationContainer},i().createElement(d.Dy,{as:"h1",variant:"alto"},v.ag.get("concerts_shows_in")),i().createElement("span",null,r&&i().createElement(L,{placeholder:v.ag.get("concerts.input.search_placeholder"),onSelectLocation:function(e){t(e),s(!1)},hideLocationSelector:function(){return s(!1)}}),!r&&i().createElement(d.Dy,{as:"h2",variant:"alto",className:N.locationName,dir:"auto",onClick:s,role:"button"},n)))}},25340:(e,t,n)=>{n.d(t,{Ms:()=>r,b8:()=>l,lJ:()=>i,NL:()=>s,cd:()=>u,O1:()=>m,Yl:()=>h,ij:()=>v});var a=n(319),c=n.n(a),o=(n(83710),n(21249),n(68309),n(92222),n(20657)),r=function(e){return o.ag.formatDate(e,{weekday:"short",month:"short",day:"numeric"})},l=function(e){return o.ag.formatDate(e,{hour:"numeric",minute:"numeric"})},i=function(e){return o.ag.formatDate(e,{month:"short"}).toUpperCase()},s=function(e){return o.ag.formatDate(e,{month:"short",day:"numeric"}).toUpperCase()},u=function(e){return o.ag.formatDate(e,{weekday:"short"})},m=function(e){return e<new Date},g={row:{1:function(e){return o.ag.get.apply(o.ag,["concert.header.entity_title_1"].concat(c()(e)))},2:function(e){return o.ag.get.apply(o.ag,["concert.header.entity_title_2"].concat(c()(e)))},3:function(e){return o.ag.get.apply(o.ag,["concert.header.entity_title_3"].concat(c()(e)))},4:function(e){return o.ag.get.apply(o.ag,["concert.header.entity_title_4"].concat(c()(e)))},more:function(e){return o.ag.get.apply(o.ag,["concert.header.entity_title_more"].concat(c()(e)))}},entity:{1:function(e){return o.ag.get.apply(o.ag,["concert.header.upcoming_concert_title_1"].concat(c()(e)))},2:function(e){return o.ag.get.apply(o.ag,["concert.header.upcoming_concert_title_2"].concat(c()(e)))},3:function(e){return o.ag.get.apply(o.ag,["concert.header.upcoming_concert_title_3"].concat(c()(e)))},4:function(e){return o.ag.get.apply(o.ag,["concert.header.upcoming_concert_title_4"].concat(c()(e)))},more:function(e){return o.ag.get.apply(o.ag,["concert.header.upcoming_concert_title_more"].concat(c()(e)))}}},d=function(e,t){var n=g[t],a=function(e){try{var t;return!e.title||!e.festival&&null!==(t=e.artists)&&void 0!==t&&t.length?{artists:e.artists.map((function(e){return e.name||e.profile.name}))}:{title:e.title}}catch(e){return null}}(e);if(a){if(a.title)return a.title;if(a.artists)return a.artists.length>4?n.more(a.artists):n[a.artists.length](a.artists)}return""},h=function(e){return d(e,"row")},v=function(e){return d(e,"entity")}},19565:(e,t,n)=>{n.d(t,{u:()=>p});var a=n(59713),c=n.n(a),o=n(67294),r=n.n(o),l=n(94184),i=n.n(l),s=n(28760),u=n(39561),m=n(62890);const g="FvfvGU3jvHRskUU9v9_8",d="Q9AlbZn2EGzy3MTWXa8X",h="mxmxS0y8LiwSs5nueKPT",v="GXxVAveNFStY3pBI_NO4",f="eHcXC2s97InYP7rMNT0H";var p=r().memo((function(e){var t=e.children,n=e.message,a=e.title,o=e.linkTitle,l=e.linkTo,p=e.onClick,E=e.renderInline,y=void 0!==E&&E,N=(0,u.e)(),b=N.isXSOnly,_=N.isSMOnly,C=b||_;return r().createElement("section",{className:i()(g,c()({},d,y))},t,r().createElement(s.Dy,{as:"h1",variant:C?"cello":"alto",className:v},a),r().createElement(s.Dy,{variant:C?"mesto":"ballad",className:f},n),o&&(l||p)&&r().createElement(m.z,{version:"secondary",className:h,linkTo:l,onClick:p},o))}))}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map